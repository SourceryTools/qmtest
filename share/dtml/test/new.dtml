<dtml-comment><!--

  File:   new.dtml
  Author: Alex Samuel
  Date:   2001-04-18

  Contents:
    Document template for new test or new resource page.

  Copyright (C) 2001 CodeSourcery LLC.  This material may
  be distributed only subject to the terms and conditions set forth in
  the Software Carpentry Open Publication License, which is available at:

    http://www.software-carpentry.com/openpub-license.html

--></dtml-comment>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xhtmlns="http://www.w3.org/1999/xhtml">
 <dtml-var expr="GenerateHtmlHeader(GetTitle())">
 <dtml-var expr="GenerateStartBody()">

 <h3><dtml-var expr="GetTitle()"></h3>

 <form name="form"
       method="post"
       action="<dtml-var expr="MakeSubmitUrl()">"
       enctype="multipart/form-data"/>

  <table border="0"
         cellpadding="4"
         cellspacing="4"
         width="100%">
   <tbody>
    <tr>
     <td colspan="2">
      <dtml-if expr="field_errors != {}">
       <p>Your <dtml-var name="type"> submission contained errors.
       Please correct them and resubmit.</p>
      <dtml-else>
       <p>First, you must specify the ID and class for the new <dtml-var
       name="type">.</p>
      </dtml-if>
     </td>
    </tr>

    <tr valign="top"
       <dtml-if expr="field_errors.has_key('_id')">
        class="field-error"
       <dtml-else>
        class="field"
       </dtml-if>
        >
     <td width="100%">
      <dtml-if expr="type == 'test'">
       <b>Test ID</b>
       <p>The test ID identifies the test.</p>
      <dtml-else>
       <b>Resource ID</b>
       <p>The resource ID identifies the resource.</p>
      </dtml-if>
     </td>
     <td>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
       <tr valign="top"><td>
        <input name="id" 
               type="text" 
               size="40" 
               value="<dtml-var name="item_id">"/>
        <dtml-if expr="field_errors.has_key('_id')">
         <br>
         <span class="error">
          <dtml-var expr="field_errors['_id']">
         </span>
        </dtml-if>
       </td><td align="right">
        <dtml-if expr="type == 'test'">
         <dtml-var expr="web.make_help_link('test ID')">
        <dtml-else>
         <dtml-var expr="web.make_help_link('resource ID')">
        </dtml-if>
       </td></tr>
      </table>
     </td>
    </tr>

    <tr valign="top"
       <dtml-if expr="field_errors.has_key('_class')">
        class="field-error"
       <dtml-else>
        class="field"
       </dtml-if>
        >
     <td>
      <dtml-if expr="type == 'test'">
       <b>Test Class</b>

       <p>The test class determines how the test is parameterized, and
       provides the mechanism by which the test is run.</p>
      <dtml-else>
       <b>Resource Class</b>

       <p>The resource class determines how the resource is parameterized,
       and provides the mechanism by which the resource is run.</p>
      </dtml-if>
     </td>
     <td>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
       <tr valign="top"><td>
        Standard Classes:
        <select name="class_list"
                onchange="set_class();">
         <option value=""> </option>
         <dtml-in name="class_names">
         <dtml-let class_name=sequence-item>
          <option value="<dtml-var name="class_name">">
           <dtml-var name="class_name">
          </option>
         </dtml-let>
         </dtml-in>
        </select>
        <input name="class" 
               type="text" 
               size="40" 
               value="<dtml-var name="class_name">"
               onkeydown="document.form.class_list.selectedIndex = 0;"
               />
        <dtml-if expr="field_errors.has_key('_class')">
         <br>
         <span class="error">
          <dtml-var expr="field_errors['_class']">
         </span>
        </dtml-if>
       </td><td align="right">
        <dtml-if expr="type == 'test'">
         <dtml-var expr="web.make_help_link('test class control')">
        <dtml-else>
         <dtml-var expr="web.make_help_link('resource class control')">
        </dtml-if>
       </td></tr>
      </table>
     </td>
    </tr>

    <tr class="heading">
     <td colspan="2">
      <input type="submit" value=" Next > ">
      <dtml-var expr="MakeButton('Cancel', 'dir')">
     </td>
    </tr>
   </tbody>
  </table>

 </form>

 <script language="JavaScript">
 function set_class()
 {
   var select = document.form.class_list;
   var index = select.selectedIndex;
   if(index > 0)
     // "class" is a reserved word in JavaScript, so access the class 
     // input by index.
     document.form[2].value = select[index].value;
 }
 </script>

 <dtml-var expr="GenerateEndBody()">
</html>

<dtml-comment><!-- 
  Local Variables:
  mode: xml
  indent-tabs-mode: nil
  fill-column:72
  End:
--></dtml-comment>
