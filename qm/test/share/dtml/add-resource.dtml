<dtml-comment><!--

  File:   add-resource.dtml
  Author: Alex Samuel
  Date:   2001-04-16

  Contents:
    Document template for web page to specify a resource for a test.

  Copyright (C) 2001 CodeSourcery LLC.  

  For license terms see the file COPYING.

--></dtml-comment>
<dtml-var expr="GenerateXMLHeader()">
 <dtml-var expr="GenerateHtmlHeader('Specify a Resource')">
 <dtml-var expr="GenerateStartBody(decorations=0)">

  <table border="0" cellpadding="0" cellspacing="0" width="100%">
   <tr valign="top"><td width="100%">
    <h3>Specify a Resource</h3>
   </td><td>
    <dtml-var expr="web.make_help_link('resource popup')">
   </td></tr>
  </table>

  <form name="form"
        onsubmit="add_resource();">

   <table border="0"
          cellpadding="6"
          cellspacing="4"
          width="100%">
    <tbody>
     <tr class="field" valign="top">
      <td>
       <b>Resource ID</b>
      </td>
      <td>
       <select name="resource_id_list" 
               size="8" 
               width="240"
               onchange="set_resource_id();">
        <dtml-in expr="resource_ids">
        <dtml-let resource_id=sequence-item>
         <option value="<dtml-var name="resource_id">">
          <dtml-var name="resource_id">
         </option>
        </dtml-let>
        </dtml-in>
       </select>
       <br />
       ID: <input type="text" size="32" name="resource_id"/>
      </td>
     </tr>

     <tr class="field">
      <td colspan="2">
       <input type="submit" value="  OK  "/>
       <input type="button"
              value=" Cancel "
              onclick="window.close();"/>
      </td>
     </tr>
    </tbody>
   </table>

  </form>

  <dtml-var expr="GenerateStartScript()">
  function set_resource_id()
  {
    var select = document.form.resource_id_list;
    var index = select.selectedIndex;
    if(index != -1)
      document.form.resource_id.value = select[index].value;
  }

  function add_resource()
  {
    var resource_id = document.form.resource_id.value;
    var select = window.opener.document.form._set_resources;
    var contents = window.opener.document.form.resources;
    if(resource_id != "")
      window.opener.add_to_set(select, contents, resource_id, resource_id);
    window.close();
    return false;
  }
  <dtml-var expr="GenerateEndScript()">

 <dtml-var expr="GenerateEndBody(decorations=0)">
</html>

<dtml-comment><!-- 
  Local Variables:
  mode: xml
  indent-tabs-mode: nil
  fill-column:72
  End:
--></dtml-comment>
