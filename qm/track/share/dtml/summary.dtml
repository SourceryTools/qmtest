<dtml-comment><!--

  File:   summary.dtml
  Author: Alex Samuel
  Date:   2001-02-08

  Contents:
    Document template for issue summary form.

  Copyright (C) 2001 CodeSourcery LLC.  

  For license terms see the file COPYING.

--></dtml-comment>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
 <dtml-var expr="GenerateHtmlHeader('Issue Summary')">
 <dtml-var expr="GenerateStartBody()">

  <table border="0" cellpadding="0" cellspacing="0" width="100%">
   <tr>
    <td>
     <p>Click on a column heading to sort by that field.</p>
    </td>
    <td align="right">
     <form name="navigation">
      <dtml-var expr="MakeColorKeyButton()">
      <dtml-var expr="MakeDisplayOptionsButton()">
     </form>
    </td>
   </tr>
  </table>

  <dtml-if expr="issue_map != {}">

   <table cellspacing="0" 
          border="0" 
          cellpadding="4"
          width="100%" 
          columns="<dtml-var expr="_.len(field_names)">">

    <!-- The row containing column headings. -->
    <thead>
     <tr>
      <dtml-in name="field_names">
      <dtml-with expr="_.namespace(field_name=_['sequence-item'])">
       <th><a href="<dtml-var expr="MakeResortUrl(field_name)">"><span
       id="colhead"><dtml-var name="field_name"></span></a></th>
      </dtml-with>
      </dtml-in>
     </tr>
    </thead>

    <!-- Rows corresponding to issues. -->

    <tbody>

     <dtml-in name="issue_classes">
     <dtml-let issue_class=sequence-item
               index=sequence-index
               issues="issue_map[issue_class]">

      <dtml-comment><!--
        If the results contain issues from more than one class, precede
        the issues of each class with the class title.
      --></dtml-comment>
      <dtml-if expr="_.len(issue_classes) > 1">
       <tr>
        <td class="issue_class" 
            colspan="<dtml-var expr="_.len(field_names)">">
        </th>
       </tr>
       <tr>
        <td colspan="<dtml-var expr="_.len(field_names)">">
         <b><dtml-var expr="issue_class.GetTitle()"></b>
        </th>
       </tr>
      </dtml-if>

      <dtml-in name="issues">
      <dtml-with expr="_.namespace(issue=_['sequence-item'])">
       <tr bgcolor="<dtml-var expr="GetBackgroundColor(issue)">"
           valign="top">
        <dtml-in name="field_names">
        <dtml-with expr="_.namespace(field_name=_['sequence-item'])">
         <td>
          <dtml-if expr="field_name == 'iid'">
           <a href="<dtml-var expr="WebRequest('show', 
                                    iid=issue.GetId()).AsUrl()">"><font
           color="black"><dtml-var
           expr="FormatFieldValue(issue, field_name)"></font></a>
          <dtml-else>
           <dtml-var expr="FormatFieldValue(issue, field_name)">
          </dtml-if>
         </td>
        </dtml-with>
        </dtml-in>
       </tr>
      </dtml-with>
      </dtml-in>

     </dtml-let>
     </dtml-in>

    </tbody>

   </table>

  <dtml-else>
   <p><i>No issues.</i></p>

  </dtml-if>

 <dtml-var expr="GenerateEndBody()">
</html>

<dtml-comment><!-- 
  Local Variables:
  mode: xml
  indent-tabs-mode: nil
  fill-column:72
  End:
--></dtml-comment>
